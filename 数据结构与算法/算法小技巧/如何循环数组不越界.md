# 如何循环数组不越界

---

当我们遇到数组需要循环的时候，比如遍历到最右边时可以继续往左边遍历，比如输入的数据其实是一个圈，怎么操作才能不越界呢？

一个关键的操作就是**对对整个数组长度n取余（求模）**，举个例子：

数组大小为`n=8`，索引标号`0,...,7`如何一直**往右循环遍历**？

**`next = (i+1) % n`**

这样当`i=7`时，下个索引就是`0`。

同样的道理，如何**往左循环遍历**呢？

**`next = (i-1 + n) % n`**

这样当 `i=0`时，下个索引就是 `7`，这里括号里`+n`是为了防止出现负数，比如 `i=0，0-1=-1，`加上n后就等于7了。

那么，如果不需要循环遍历，只是需要**从左往右遍历两次**数组呢，其实这个时候只需要把原来数组的长度扩大为与哪里的 2倍，再对索引进行取余即可。比如：

数组长度 `n=8`，但是我们想要从左往右遍历两次，即第一遍达到最右边后又继续可以从左往右遍历一遍。可以如下：

```go
for i := 0; i < 2*n; i ++{
  j = i%n  // j为实际的索引
  // 循环操作...
}
```

比如当 `i = 10` 时，对应的`j= (10%8) =2`。

